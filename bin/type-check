#!/usr/bin/env python3

from argparse import ArgumentParser
import os

parser = ArgumentParser(description='Run the Hack strict mode type checker.')
parser.add_argument('-p', '--path', dest='path', default='', help='Path to a folder to check.')

args = parser.parse_args()

# Go to the defined path
path = '/vagrant/src/'

if (args.path):
    path += args.path;

os.chdir(os.path.abspath(path))

# Create .hhconfig file
config = open('.hhconfig', 'w+')
config.close()

# Run the checker
os.system('hh_client restart')
os.system('hh_client')

# Delete the .hhconfig file
os.remove('.hhconfig')